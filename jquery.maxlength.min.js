/*
 * jQuery Maxlength
 * http://pioul.fr/jquery-maxlength
 *
 * Copyright 2013, Philippe Masset
 * Dual licensed under the MIT or GPL Version 2 licenses
 */
!function(t){t.fn.maxlength=function(n){var e=t(this);return e.each(function(){n=t.extend({},{counterContainer:!1,lengthFunction:function(t){return t.length},lengthAttribute:"maxlength",text:"%left characters left"},n);var e=t(this),h={options:n,field:e,counter:t('<div class="maxlength"></div>'),maxLength:parseInt(e.attr(n.lengthAttribute),10),lastLength:null,updateCounter:function(){var n=this.options.lengthFunction(this.field.val()),e=this.options.text.replace(/\B%(length|maxlength|left)\b/g,t.proxy(function(t,e){return"length"==e?n:"maxlength"==e?this.maxLength:this.maxLength-n},this));this.counter.html(e),n!=this.lastLength&&this.updateLength(n)},updateLength:function(t){this.field.trigger("update.maxlength",[this.field,this.lastLength,t,this.maxLength,this.maxLength-t]),this.lastLength=t}};h.maxLength&&(h.field.data("maxlength",h).bind({"keyup change":function(n){t(this).data("maxlength").updateCounter()},"cut paste drop":function(n){setTimeout(t.proxy(function(){t(this).data("maxlength").updateCounter()},this),1)}}),n.counterContainer?n.counterContainer.append(h.counter):h.field.after(h.counter),h.updateCounter())}),e}}(jQuery);